---
interface Props {
  type?: 'note' | 'tip' | 'warning' | 'caution';
  title?: string;
}

const { type = 'note', title } = Astro.props;

const config: Record<string, { icon: string; label: string; class: string }> = {
  note: {
    icon: '<circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/>',
    label: 'Note',
    class: 'callout-note',
  },
  tip: {
    icon: '<path d="M12 2v1"/><path d="M15.5 3.5 14.5 4.5"/><path d="M18 7h1"/><path d="M18.5 11.5l-1-1"/><path d="M16 16l2.4 2.4"/><path d="M8 16l-2.4 2.4"/><path d="M2 12h3"/><path d="M2.4 8.4l2 1"/><path d="M9.5 4.5L8.5 3.5"/><circle cx="12" cy="12" r="4"/>',
    label: 'Tip',
    class: 'callout-tip',
  },
  warning: {
    icon: '<path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/>',
    label: 'Warning',
    class: 'callout-warning',
  },
  caution: {
    icon: '<circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/>',
    label: 'Caution',
    class: 'callout-caution',
  },
};

const { icon, label, class: calloutClass } = config[type];
const displayTitle = title || label;
---

<div class:list={['callout', calloutClass]}>
  <div class="flex items-start gap-3">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="20"
      height="20"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      class="flex-shrink-0 mt-0.5"
      set:html={icon}
    />
    <div class="flex-1 min-w-0">
      <p class="font-semibold text-white mb-1">{displayTitle}</p>
      <div class="text-sm opacity-90">
        <slot />
      </div>
    </div>
  </div>
</div>
